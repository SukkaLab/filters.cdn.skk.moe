/// sukka-defuse-devtools-detector.js
(function(){"use strict";let e=new WeakSet;function t(t){e.has(t)||(e.add(t),t())}let o=(()=>{let e=new Set,t=[];try{window&&!e.has(window)&&(e.add(window),t.push(["window",window]))}catch{}try{window.top&&!e.has(window.top)&&(e.add(window.top),t.push(["window.top",window.top]))}catch{}try{window.self&&!e.has(window.self)&&(e.add(window.self),t.push(["window.self",window.self]))}catch{}return t})(),n={info:window.console.info,log:window.console.log,warn:window.console.warn,error:window.console.error},r=/([^\w.])debugger([^\w()[\]])/g;function c(e,t,o){return"string"==typeof t&&"string"==typeof o?t+";"+o:(n.warn("[sukka-defuse-devtools-detector]","Unexpected debugger replacer call!",{_:e,group1:t,group2:o}),e)}function u(e){return"string"==typeof e&&e.includes("debugger")}function s(e,o){if(u(e)){var s;let u=e;t(o),(s=(s=e).trim()).startsWith("debugger")&&(s=s.slice(8).trim()),s.endsWith("debugger")&&(s=s.slice(0,-8).trim()),s.includes("debugger")&&(s=s.replaceAll(r,c)),e=s,n.info("[sukka-defuse-devtools-detector]",'defuse "debugger" in arg',{before:u,after:e})}return e}let a=Function.prototype.toString,i=window.eval,l=Object.defineProperty;function d(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to console.clear()!")}function f(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to log an Element!")}function p(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to log a RegExp!")}function w(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to log a Date!")}function y(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to log a Function!")}function g(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to log a large Array!")}function k(){n.info("[sukka-defuse-devtools-detector]","Detect someone want to log a large Object!")}function v(e){var o,n,r;if("object"==typeof(o=e)&&null!==o&&"tagName"in o&&"string"==typeof o.tagName&&"nodeName"in o&&"string"==typeof o.nodeName)return t(f),!0;if("object"==typeof(n=e)&&null!==n&&"source"in n&&"string"==typeof n.source&&"flags"in n&&"string"==typeof n.flags)return t(p),!0;if("object"==typeof(r=e)&&null!==r&&"toISOString"in r&&"function"==typeof r.toISOString&&"getTime"in r&&"function"==typeof r.getTime)return t(w),!0;if("function"==typeof e)return t(y),!0;if(Array.isArray(e))return e.length>100?(t(g),!0):e.some(v);if("object"==typeof e&&e){try{if(Object(e)===e&&Object.keys(e).length>100)return t(k),!0}catch{}return Object.values(e).some(v)}return!1}function b(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from Function()')}function m(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from Function.prototype.constructor')}function h(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from new Function()')}function F(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from eval()')}function x(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from Function.prototype.bind')}function $(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from setInterval()')}function j(){n.info('[sukka-defuse-devtools-detector] defused "debugger" from setTimeout()')}o.forEach(([e,o])=>{for(let r in o.console){let c=Object.getOwnPropertyDescriptor(o.console,r);if(!c){n.warn("[sukka-defuse-devtools-detector]",`Fail to get descriptor of ${e}.console.${r}`);continue}if(!c.writable){n.warn("[sukka-defuse-devtools-detector]",`${e}.console.${r}`,"is not writable");continue}if("function"!=typeof c.value){n.warn("[sukka-defuse-devtools-detector]",`${e}.console.${r}`,"is not a function");continue}try{if("clear"===r){l(o.console,r,{configurable:!1,enumerable:!0,writable:!0,value(){t(d)}});continue}l(o.console,r,{configurable:!1,enumerable:!0,writable:!0,value:new Proxy(o.console[r],{apply(e,t,o){if(!o.some(v))return Reflect.apply(e,t,o)}})})}catch(t){n.error("[sukka-defuse-devtools-detector]",`Fail to overwrite ${e}.console.${r}`,t)}}}),o.forEach(([e,t])=>{try{l(t,"devtoolsFormatters",{configurable:!1,enumerable:!1,get:()=>[],set(){}})}catch(t){n.error("[sukka-defuse-devtools-detector]",`Fail to overwrite ${e}.devtoolsFormatters`,t)}}),o.forEach(([e,t])=>{try{t.Function=new Proxy(t.Function,{apply:(e,t,o)=>(o=o.map(e=>s(e,b)),Reflect.apply(e,t,o)),construct:(e,t,o)=>(t=t.map(e=>s(e,h)),Reflect.construct(e,t,o))})}catch(t){n.warn("[sukka-defuse-devtools-detector]",`Fail to proxy ${e}.Function!`,t)}try{t.eval=new Proxy(t.eval,{apply:(e,t,o)=>(o[0]=s(o[0],F),Reflect.apply(e,t,o))})}catch(t){n.warn("[sukka-defuse-devtools-detector]",`Fail to proxy ${e}.eval!`,t)}try{l(t.Function.prototype,"constructor",{configurable:!1,enumerable:!0,writable:!0,value:new Proxy(t.Function.prototype.constructor,{apply:(e,t,o)=>(o=o.map(e=>s(e,m)),Reflect.apply(e,t,o))})})}catch(t){n.warn("[sukka-defuse-devtools-detector]",`Fail to proxy ${e}.Function.prototype.constructor!`,t)}try{l(t.Function.prototype,"bind",{configurable:!1,enumerable:!0,writable:!1,value:new Proxy(t.Function.prototype.bind,{apply(e,t,o){let n=a.call(t);return u(n)&&(t=i("("+s(n,x)+")")),Reflect.apply(e,t,o)}})})}catch(t){n.warn("[sukka-defuse-devtools-detector]",`Fail to proxy ${e}.Function.prototype.bind!`,t)}}),o.forEach(([e,t])=>{try{t.setInterval=new Proxy(t.setInterval,{apply(e,t,o){let n=a.call(o[0]);return u(n)&&(o[0]=i("("+s(n,$)+")")),Reflect.apply(e,t,o)}})}catch(t){n.warn("[sukka-defuse-devtools-detector]",`Fail to proxy ${e}.setInterval!`,t)}try{t.setTimeout=new Proxy(t.setTimeout,{apply(e,t,o){let n=a.call(o[0]);return u(n)&&(o[0]=i("("+s(n,j)+")")),Reflect.apply(e,t,o)}})}catch(t){n.warn("[sukka-defuse-devtools-detector]",`Fail to proxy ${e}.setTimeout!`,t)}})})();